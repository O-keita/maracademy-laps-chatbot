<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarAcademy - CS Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            height: 90vh;
            position: relative;
            overflow: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(79, 70, 229, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(79, 70, 229, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        /* Added desktop grid pattern scaling */
        @media (min-width: 1024px) {
            body::before {
                background-size: 80px 80px;
            }
        }

        .container {
            position: relative;
            z-index: 1;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        .message-bubble {
            animation: messagePop 0.3s ease-out;
        }

        @keyframes messagePop {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(10px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .typing-indicator span {
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {

            0%,
            60%,
            100% {
                transform: translateY(0);
            }

            30% {
                transform: translateY(-10px);
            }
        }

        .glow-effect {
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.3);
        }

        .chat-scroll {
            scrollbar-width: thin;
            scrollbar-color: rgba(79, 70, 229, 0.3) transparent;
        }

        .chat-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .chat-scroll::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-scroll::-webkit-scrollbar-thumb {
            background: rgba(79, 70, 229, 0.3);
            border-radius: 3px;
        }
    </style>
</head>

<body>
    <!-- Added responsive max-width classes for desktop -->
    <div class="container max-w-md lg:max-w-5xl xl:max-w-6xl mx-auto h-screen flex flex-col">

        <!-- Welcome Screen -->
        <!-- Added responsive padding and text sizes for desktop -->
        <div id="welcomeScreen" class="flex-1 flex flex-col items-center justify-center p-6 lg:p-12 fade-in">
            <!-- Logo/Icon -->
            <!-- Increased logo size on desktop -->
            <!-- <div class="w-20 h-32 lg:w-20 lg:h-0 rounded-full bg-gradient-to-br from-indigo-600 to-indigo-800 flex items-center justify-center mb-8 lg:mb-12 glow-effect">
                <svg class="w-10 h-10 lg:w-10 lg:h-20 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                </svg>
            </div>
             -->
            <!-- Welcome Text -->
            <!-- Responsive text sizes for desktop -->
            <h1 class="text-3xl lg:text-5xl xl:text-6xl font-bold text-white mb-3 lg:mb-4 text-center">Welcome to
                MarAcademy</h1>
            <p
                class="text-gray-400 text-center mb-8 lg:mb-12 px-4 lg:px-0 text-sm sm:text-base lg:text-lg lg:max-w-2xl">
                Your personal computer science learning assistant. Ask me anything about programming, algorithms, data
                structures, and more!
            </p>


            <!-- Quick Topics -->
            <!-- Responsive grid and card sizes for desktop -->
            <div
                class="grid grid-cols-2 lg:grid-cols-2 gap-3 lg:gap-4 w-full lg:max-w-2xl mb-8 flex justify-center lg:mb-12">
                <div
                    class="bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-4 lg:p-6 hover:border-indigo-600/50 transition-all cursor-pointer">
                    <div
                        class="w-10 h-10 lg:w-12 lg:h-12 rounded-lg bg-indigo-600/20 flex items-center justify-center mb-2 lg:mb-3">
                        <svg class="w-5 h-5 lg:w-6 lg:h-6 text-indigo-400" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                    </div>
                    <h3 class="text-white font-semibold text-sm lg:text-base mb-1">Programming</h3>
                    <p class="text-gray-500 text-xs lg:text-sm">Learn coding concepts</p>
                </div>

                <div
                    class="bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-4 lg:p-6 hover:border-indigo-600/50 transition-all cursor-pointer">
                    <div
                        class="w-10 h-10 lg:w-12 lg:h-12 rounded-lg bg-indigo-600/20 flex items-center justify-center mb-2 lg:mb-3">
                        <svg class="w-5 h-5 lg:w-6 lg:h-6 text-indigo-400" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                            </path>
                        </svg>
                    </div>
                    <h3 class="text-white font-semibold text-sm lg:text-base mb-1">Algorithms</h3>
                    <p class="text-gray-500 text-xs lg:text-sm">Master problem solving</p>
                </div>



            </div>

            <!-- Start Button -->
            <!-- Responsive button sizing for desktop -->
            <button onclick="startChat()"
                class="w-full lg:max-w-md bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-4 lg:py-5 lg:text-lg rounded-2xl transition-all glow-effect">
                Start Learning
            </button>
        </div>

        <!-- Chat Screen -->
        <div id="chatScreen" class="hidden h-screen flex flex-col">
            <!-- Header -->
            <!-- Responsive header padding and sizes for desktop -->
            <div
                class="bg-slate-900/80 backdrop-blur-sm border-b border-slate-800 p-4 lg:p-6 flex items-center gap-3 lg:gap-4 flex-shrink-0">
                <button onclick="goBack()"
                    class="w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-slate-800 flex items-center justify-center hover:bg-slate-700 transition-colors">
                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-gray-400" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                        </path>
                    </svg>
                </button>
                <div class="flex items-center gap-3 lg:gap-4 flex-1">
                    <div class="w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-indigo-600 flex items-center justify-center">
                        <svg class="w-5 h-5 lg:w-6 lg:h-6 text-white" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z">
                            </path>
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-white font-semibold lg:text-lg">CS Assistant</h2>
                        <p class="text-xs lg:text-sm text-gray-500">Online</p>
                    </div>
                </div>
                <button
                    class="w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-slate-800 flex items-center justify-center hover:bg-slate-700 transition-colors">
                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-gray-400" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z">
                        </path>
                    </svg>
                </button>
            </div>

            <!-- Messages Container -->
            <!-- Responsive padding and max-width for messages on desktop -->

            <div id="messagesContainer" class="flex-1 overflow-y-auto p-4 lg:p-8 space-y-4 lg:space-y-6 chat-scroll">
                <!-- Initial AI Message -->
                <div class="flex gap-2 lg:gap-3 message-bubble lg:max-w-4xl">
                    <div
                        class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-indigo-600 flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 lg:w-5 lg:h-5 text-white" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z">
                            </path>
                        </svg>
                    </div>
                    <div
                        class="bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl rounded-tl-sm p-4 lg:p-5 max-w-[80%] lg:max-w-[70%]">
                        <p class="text-gray-300 text-sm lg:text-base leading-relaxed">Hi! I'm your CS assistant. I can
                            help you with programming concepts, algorithms, data structures, and more. What would you
                            like to learn today?</p>
                    </div>
                </div>
            </div>

            <!-- Typing Indicator (hidden by default) -->
            <!-- Responsive sizing for typing indicator on desktop -->
            <div id="typingIndicator" class="hidden px-4 lg:px-8 pb-2">
                <div class="flex gap-2 lg:gap-3 lg:max-w-4xl">
                    <div
                        class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-indigo-600 flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 lg:w-5 lg:h-5 text-white" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z">
                            </path>
                        </svg>
                    </div>
                    <div
                        class="bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl rounded-tl-sm p-4 lg:p-5">
                        <div class="typing-indicator flex gap-1">
                            <span class="w-2 h-2 lg:w-2.5 lg:h-2.5 bg-gray-500 rounded-full"></span>
                            <span class="w-2 h-2 lg:w-2.5 lg:h-2.5 bg-gray-500 rounded-full"></span>
                            <span class="w-2 h-2 lg:w-2.5 lg:h-2.5 bg-gray-500 rounded-full"></span>
                        </div>
                    </div>
                </div>
            </div>

            
            <!-- Input Area -->
        <div class="bg-slate-900/80 backdrop-blur-sm border-t border-slate-800 p-4 lg:p-6 flex-shrink-0">
            <div class="flex gap-2 lg:gap-3 items-end lg:max-w-4xl lg:mx-auto w-full">
                <!-- Input Container -->
                <div class="flex-1 min-w-0 bg-slate-800/50 border border-slate-700/50 rounded-2xl flex items-center px-4 lg:px-5 py-3 lg:py-4 focus-within:border-indigo-600/50 transition-colors">
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="Ask me anything about CS..." 
                        class="flex-1 min-w-0 bg-transparent text-white placeholder-gray-500 outline-none text-sm lg:text-base" 
                        onkeypress="handleKeyPress(event)" 
                    />
                    <button class="text-gray-500 hover:text-gray-400 transition-colors">
                        <svg class="w-5 h-5 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </button>
                </div>

                <!-- Send Button -->
                <button onclick="sendMessage()" class="w-12 h-12 lg:w-14 lg:h-14 bg-indigo-600 hover:bg-indigo-700 rounded-2xl flex items-center justify-center transition-all glow-effect flex-shrink-0">
                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                </button>
            </div>
        </div>


        <!-- Bottom Navigation -->
        <!-- Responsive bottom nav sizing for desktop--->
        <!-- <div id="bottomNav" class="bg-slate-900/80 backdrop-blur-sm border-t border-slate-800 p-4 lg:p-6">
            <div class="flex justify-around items-center lg:max-w-2xl lg:mx-auto">
                <button class="flex flex-col items-center gap-1 lg:gap-2 text-indigo-500">
                    <svg class="w-6 h-6 lg:w-7 lg:h-7" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"></path>
                    </svg>
                    <span class="text-xs lg:text-sm font-medium">Chat</span>
                </button>
                <button class="flex flex-col items-center gap-1 lg:gap-2 text-gray-500 hover:text-gray-400 transition-colors">
                    <svg class="w-6 h-6 lg:w-7 lg:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                    </svg>
                    <span class="text-xs lg:text-sm font-medium">Topics</span>
                </button>
                <button class="flex flex-col items-center gap-1 lg:gap-2 text-gray-500 hover:text-gray-400 transition-colors">
                    <svg class="w-6 h-6 lg:w-7 lg:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-xs lg:text-sm font-medium">History</span>
                </button>
                <button class="flex flex-col items-center gap-1 lg:gap-2 text-gray-500 hover:text-gray-400 transition-colors">
                    <svg class="w-6 h-6 lg:w-7 lg:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="text-xs lg:text-sm font-medium">Profile</span>
                </button>
            </div>
        </div> -->
    </div>

    <script>
        // Knowledge base for CS topics
        const csKnowledge = {
            'array': 'An array is a data structure that stores elements of the same type in contiguous memory locations. Arrays provide O(1) access time but O(n) insertion/deletion time in the middle.',
            'linked list': 'A linked list is a linear data structure where elements are stored in nodes, and each node points to the next node. It provides O(1) insertion/deletion but O(n) access time.',
            'binary tree': 'A binary tree is a hierarchical data structure where each node has at most two children (left and right). It\'s used in many algorithms like binary search trees and heaps.',
            'sorting': 'Common sorting algorithms include Quick Sort (O(n log n) average), Merge Sort (O(n log n) guaranteed), and Bubble Sort (O(n²)). Choose based on your data characteristics.',
            'recursion': 'Recursion is when a function calls itself to solve smaller instances of the same problem. It needs a base case to stop and a recursive case that breaks down the problem.',
            'big o': 'Big O notation describes algorithm complexity. Common complexities: O(1) constant, O(log n) logarithmic, O(n) linear, O(n log n) linearithmic, O(n²) quadratic.',
            'stack': 'A stack is a LIFO (Last In First Out) data structure. Operations: push (add), pop (remove), peek (view top). Used in function calls, undo operations, and expression evaluation.',
            'queue': 'A queue is a FIFO (First In First Out) data structure. Operations: enqueue (add), dequeue (remove). Used in BFS, task scheduling, and buffering.',
            'hash table': 'A hash table uses a hash function to map keys to values, providing O(1) average-case lookup, insertion, and deletion. Collisions are handled via chaining or open addressing.',
            'graph': 'A graph consists of vertices (nodes) and edges (connections). Types include directed/undirected, weighted/unweighted. Common algorithms: DFS, BFS, Dijkstra\'s, and Kruskal\'s.',
            'dynamic programming': 'Dynamic programming solves complex problems by breaking them into overlapping subproblems and storing results (memoization). Examples: Fibonacci, knapsack problem, longest common subsequence.',
            'javascript': 'JavaScript is a high-level, interpreted programming language. Key features: dynamic typing, first-class functions, prototypal inheritance, and asynchronous programming with promises/async-await.',
            'python': 'Python is a high-level, interpreted language known for readability. Features: dynamic typing, extensive libraries, list comprehensions, and strong support for data science and ML.',
            'oop': 'Object-Oriented Programming organizes code into objects with properties and methods. Key principles: encapsulation, inheritance, polymorphism, and abstraction.',
            'api': 'An API (Application Programming Interface) defines how software components interact. REST APIs use HTTP methods (GET, POST, PUT, DELETE) to perform CRUD operations.',
            'database': 'Databases store and organize data. SQL databases (MySQL, PostgreSQL) use structured tables and relationships. NoSQL databases (MongoDB, Redis) offer flexible schemas for specific use cases.'
        };

        const BASE_URL = 'https://api.ngaagenticflow.agency/omar/own/chatbot'
        // const input = document.getElementById('messageInput');
        // const message = input.value.trim();
        function scrollToBottom() {
            const container = document.getElementById('messagesContainer');
            container.scrollTop = container.scrollHeight;
        }

        function startChat() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('chatScreen').classList.remove('hidden');
            document.getElementById('chatScreen').classList.add('fade-in');
        }

        function goBack() {
            document.getElementById('chatScreen').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function postMessage(message) {
            const url = `${BASE_URL}/api/chat`;
            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        'Content-Type': 'application/json; charset=UTF-8'
                    },
                    body: JSON.stringify({
                        "message": message
                    })
                });
                if (!response.ok) {
                    throw new Error(`Response status: ${response.status}`);
                }

                const result = await response.json();

                hideTypingIndicator()
                // generateResponse(result.response)

                addMessage(result.response, 'ai')
                console.log(result.response);
            } catch (error) {
                console.error(error.message);
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            console.log(message)

            if (message === '') return;

            // Add user message
            addMessage(message, 'user');
            input.value = '';

            // Show typing indicator
            showTypingIndicator();

            postMessage(message)

            // hideTypingIndicator()

            // Simulate AI response after delay
            // setTimeout(() => {
            //     hideTypingIndicator();
            //     // const response = generateResponse(message);
            //     addMessage(response, 'ai');
            // }, 1500 + Math.random() * 1000);
        }

        function addMessage(text, sender) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-bubble';

            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex gap-2 lg:gap-3 justify-end lg:max-w-4xl lg:ml-auto">
                        <div class="bg-indigo-600 rounded-2xl rounded-tr-sm p-4 lg:p-5 max-w-[80%] lg:max-w-[70%]">
                            <p class="text-white text-sm lg:text-base leading-relaxed">${escapeHtml(text)}</p>
                        </div>
                        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 lg:w-5 lg:h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex gap-2 lg:gap-3 lg:max-w-4xl">
                        <div class="w-8 h-8 lg:w-10 lg:h-10 rounded-full bg-indigo-600 flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 lg:w-5 lg:h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                        </div>
                        <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl rounded-tl-sm p-4 lg:p-5 max-w-[80%] lg:max-w-[70%]">
                            <p class="text-gray-300 text-sm lg:text-base leading-relaxed">${escapeHtml(text)}</p>
                        </div>
                    </div>
                `;
            }

            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').classList.remove('hidden');
            const container = document.getElementById('messagesContainer');
            container.scrollTop = container.scrollHeight;
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').classList.add('hidden');
        }

        function generateResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();

            // Check for greetings
            if (lowerMessage.match(/^(hi|hello|hey|greetings)/)) {
                return "Hello! I'm here to help you learn computer science. What topic would you like to explore?";
            }

            // Check for thanks
            if (lowerMessage.match(/(thank|thanks|thx)/)) {
                return "You're welcome! Feel free to ask me anything else about computer science. I'm here to help!";
            }

            // Search knowledge base
            for (const [key, value] of Object.entries(csKnowledge)) {
                if (lowerMessage.includes(key)) {
                    return value;
                }
            }

            // Check for question words
            if (lowerMessage.includes('what is') || lowerMessage.includes('explain')) {
                return "That's a great question! While I don't have specific information about that topic in my current knowledge base, I can help you with: arrays, linked lists, trees, sorting algorithms, recursion, Big O notation, stacks, queues, hash tables, graphs, dynamic programming, and various programming languages. What would you like to learn about?";
            }

            // Default response
            return "I'm here to help you learn computer science! I can explain concepts like data structures (arrays, linked lists, trees), algorithms (sorting, searching), programming paradigms (OOP, functional), and much more. What specific topic interests you?";
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Add some example prompts on load
        const examplePrompts = [
            "What is an array?",
            "Explain recursion",
            "Tell me about Big O notation",
            "What is a hash table?"
        ];
    </script>
</body>

</html>